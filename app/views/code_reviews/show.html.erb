<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Code Review for <%= @code_review.candidate_name %></h1>
    <div>
      <%= link_to 'Edit', edit_code_review_path(@code_review), class: 'btn btn-warning' %>
      <%= link_to 'Back', code_reviews_path, class: 'btn btn-secondary' %>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-header">
      <h2>Basic Information</h2>
    </div>
    <div class="card-body">
      <p><strong>Candidate:</strong> <%= @code_review.candidate_name %></p>
      <p><strong>Submission URL:</strong> <%= link_to @code_review.submission_url, @code_review.submission_url, target: '_blank' %></p>
      <p><strong>Reviewer:</strong> <%= @code_review.reviewer_name %></p>
      <p><strong>Review Date:</strong> <%= @code_review.created_at.strftime('%B %d, %Y') %></p>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-header">
      <h2>Scores</h2>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <h3>Code Quality (<%= @code_review.calculate_quality_score %> points)</h3>
          <ul class="list-unstyled">
            <% @code_review.quality_scores&.each do |criterion, score| %>
              <li><strong><%= criterion.humanize %>:</strong> <%= score %></li>
            <% end %>
          </ul>
        </div>
        <div class="col-md-6">
          <h3>Documentation (<%= @code_review.calculate_documentation_score %> points)</h3>
          <ul class="list-unstyled">
            <% @code_review.documentation_scores&.each do |criterion, score| %>
              <li><strong><%= criterion.humanize %>:</strong> <%= score %></li>
            <% end %>
          </ul>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <h3>Technical (<%= @code_review.calculate_technical_score %> points)</h3>
          <ul class="list-unstyled">
            <% @code_review.technical_scores&.each do |criterion, score| %>
              <li><strong><%= criterion.humanize %>:</strong> <%= score %></li>
            <% end %>
          </ul>
        </div>
        <div class="col-md-6">
          <h3>Problem Solving (<%= @code_review.calculate_problem_solving_score %> points)</h3>
          <ul class="list-unstyled">
            <% @code_review.problem_solving_scores&.each do |criterion, score| %>
              <li><strong><%= criterion.humanize %>:</strong> <%= score %></li>
            <% end %>
          </ul>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <h3>Testing Bonus (<%= @code_review.calculate_testing_bonus %> points)</h3>
          <ul class="list-unstyled">
            <% @code_review.testing_scores&.each do |criterion, score| %>
              <li><strong><%= criterion.humanize %>:</strong> <%= score %></li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-header">
      <h2>Final Assessment</h2>
    </div>
    <div class="card-body">
      <p><strong>Total Score:</strong> <%= @code_review.calculate_total_score %></p>
      <p><strong>Assessment Level:</strong> <%= @code_review.assessment_level %></p>
      <% if @code_review.non_working_solution? %>
        <p class="text-danger"><strong>Note:</strong> Solution was marked as non-working (-30 points)</p>
      <% end %>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-header">
      <h2>Overall Comments</h2>
    </div>
    <div class="card-body">
      <p><%= @code_review.overall_comments %></p>
    </div>
  </div>
</div> 